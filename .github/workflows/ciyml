name: CI - Validar e Testar

on:
  push:
    branches:
      - main
  pull_request:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout do código
        uses: actions/checkout@v4

      - name: Validar HTML
        run: |
          if ! grep -q "<html" site/index.html; then
            echo "Arquivo HTML inválido!"
            exit 1
          fi
          echo "HTML Validado com sucesso."

      - name: Teste simples
        run: |
          echo "Rodando teste básico..."
          if [ ! -f "site/index.html" ]; then
            echo "Arquivo index.html não encontrado!"
            exit 1
          fi
          echo "Teste finalizado com sucesso."

      - name: Criar artefato do site
        run: |
          mkdir dist
          cp -R site/* dist/

      - name: Upload do artefato
        uses: actions/upload-artifact@v4
        with:
          name: site-build
          path: dist
